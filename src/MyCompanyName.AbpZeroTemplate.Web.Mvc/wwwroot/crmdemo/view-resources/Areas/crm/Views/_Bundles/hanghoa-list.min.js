var ShipmentControler=function(a){function i(){h.ajax.reload()}function e(a){abp.message.confirm("",function(e){e&&l.delete({id:a.id}).done(function(){i(!0),abp.notify.success(app.localize("SuccessfullyDeleted"))})})}var n=a.getModal().find("#DM_HangHoaShipmentTab"),t=a.getModal().find("[name=id]").val(),o=$("#DM_LoHangsTable"),l=abp.services.app.dM_LoHangs;$(".date-picker").datetimepicker({locale:abp.localization.currentLanguage.name,format:"L"});var r={create:abp.auth.hasPermission("Pages.DM_LoHangs.Create"),edit:abp.auth.hasPermission("Pages.DM_LoHangs.Edit"),delete:abp.auth.hasPermission("Pages.DM_LoHangs.Delete")},d=new app.ModalManager({viewUrl:abp.appPath+"crm/DM_LoHangs/CreateOrEditModal",scriptUrl:abp.appPath+"view-resources/Areas/crm/Views/DM_LoHangs/_CreateOrEditModal.js",modalClass:"CreateOrEditDM_LoHangModal"}),u=new app.ModalManager({viewUrl:abp.appPath+"crm/DM_LoHangs/ViewdM_LoHangModal",modalClass:"ViewDM_LoHangModal"}),h=o.DataTable({paging:!0,serverSide:!0,processing:!0,listAction:{ajaxFunction:l.getAll,inputFilter:function(){return{filter:n.find("#DM_LoHangsTableFilter").val(),dM_HangHoaId:t,soLoFilter:n.find("#SoLoFilterId").val(),minNgaySanXuatFilter:n.find("#MinNgaySanXuatFilterId").val(),maxNgaySanXuatFilter:n.find("#MaxNgaySanXuatFilterId").val(),minNgayHetHanFilter:n.find("#MinNgayHetHanFilterId").val(),maxNgayHetHanFilter:n.find("#MaxNgayHetHanFilterId").val(),tenLoFilter:n.find("#TenLoFilterId").val(),dM_HangHoaTenHangHoaFilter:n.find("#DM_HangHoaTenHangHoaFilterId").val()}}},columnDefs:[{width:120,targets:0,data:null,orderable:!1,autoWidth:!1,defaultContent:"",rowAction:{cssClass:"btn btn-brand dropdown-toggle",text:'<i class="fa fa-cog"></i> '+app.localize("Actions")+' <span class="caret"></span>',items:[{text:app.localize("View"),action:function(a){u.open({data:a.record})}},{text:app.localize("Edit"),visible:function(){return r.edit},action:function(a){d.open({id:a.record.dM_LoHang.id,isHangHoa:!0,idHangHoa:t})}},{text:app.localize("Delete"),visible:function(){return r.delete},action:function(a){e(a.record.dM_LoHang)}}]}},{targets:1,data:"dM_LoHang.soLo"},{targets:2,data:"dM_LoHang.tenLo"},{targets:3,data:"dM_LoHang.ngaySanXuat",render:function(a){return a?moment(a).format("L"):""}},{targets:4,data:"dM_LoHang.ngayHetHan",render:function(a){return a?moment(a).format("L"):""}}]});return n.find("#ShowAdvancedFiltersSpan").click(function(){n.find("#ShowAdvancedFiltersSpan").hide(),n.find("#HideAdvancedFiltersSpan").show(),n.find("#AdvacedAuditFiltersArea").slideDown()}),n.find("#HideAdvancedFiltersSpan").click(function(){n.find("#HideAdvancedFiltersSpan").hide(),n.find("#ShowAdvancedFiltersSpan").show(),n.find("#AdvacedAuditFiltersArea").slideUp()}),n.find("#CreateNewDM_LoHangButton").click(function(){d.open({isHangHoa:!0,idHangHoa:t})}),n.find("#ExportToExcelButton").click(function(){l.getDM_LoHangsToExcel({filter:n.find("#DM_LoHangsTableFilter").val(),soLoFilter:n.find("#SoLoFilterId").val(),minNgaySanXuatFilter:n.find("#MinNgaySanXuatFilterId").val(),maxNgaySanXuatFilter:n.find("#MaxNgaySanXuatFilterId").val(),minNgayHetHanFilter:n.find("#MinNgayHetHanFilterId").val(),maxNgayHetHanFilter:n.find("#MaxNgayHetHanFilterId").val(),tenLoFilter:n.find("#TenLoFilterId").val(),dM_HangHoaTenHangHoaFilter:n.find("#DM_HangHoaTenHangHoaFilterId").val()}).done(function(a){app.downloadTempFile(a)})}),abp.event.on("app.createOrEditDM_LoHangModalSaved",function(){i()}),n.find("#GetDM_LoHangsButton").click(function(a){a.preventDefault(),i()}),$(document).keypress(function(a){13===a.which&&i()}),!0},InventoryControler=function(a){function i(){h.ajax.reload()}function e(a){abp.message.confirm("",function(e){e&&l.delete({id:a.id}).done(function(){i(!0),abp.notify.success(app.localize("SuccessfullyDeleted"))})})}var n=a.getModal().find("#DM_HangHoaInventoryTab"),t=a.getModal().find("[name=id]").val(),o=$("#TonToiThieusTable"),l=abp.services.app.tonToiThieus,r={create:abp.auth.hasPermission("Pages.TonToiThieus.Create"),edit:abp.auth.hasPermission("Pages.TonToiThieus.Edit"),delete:abp.auth.hasPermission("Pages.TonToiThieus.Delete")},d=new app.ModalManager({viewUrl:abp.appPath+"crm/TonToiThieus/CreateOrEditModal",scriptUrl:abp.appPath+"view-resources/Areas/crm/Views/TonToiThieus/_CreateOrEditModal.js",modalClass:"CreateOrEditTonToiThieuModal"}),u=new app.ModalManager({viewUrl:abp.appPath+"crm/TonToiThieus/ViewtonToiThieuModal",modalClass:"ViewTonToiThieuModal"}),h=o.DataTable({paging:!0,serverSide:!0,processing:!0,listAction:{ajaxFunction:l.getAll,inputFilter:function(){return{filter:n.find("#TonToiThieusTableFilter").val(),dM_HangHoaId:t,minSoLuongTonToiThieuFilter:n.find("#MinSoLuongTonToiThieuFilterId").val(),maxSoLuongTonToiThieuFilter:n.find("#MaxSoLuongTonToiThieuFilterId").val(),minTonToiDaFilter:n.find("#MinTonToiDaFilterId").val(),maxTonToiDaFilter:n.find("#MaxTonToiDaFilterId").val(),dM_HangHoaTenHangHoaFilter:n.find("#DM_HangHoaTenHangHoaFilterId").val(),dM_KhoTenKhoFilter:n.find("#DM_KhoTenKhoFilterId").val()}}},columnDefs:[{width:120,targets:0,data:null,orderable:!1,autoWidth:!1,defaultContent:"",rowAction:{cssClass:"btn btn-brand dropdown-toggle",text:'<i class="fa fa-cog"></i> '+app.localize("Actions")+' <span class="caret"></span>',items:[{text:app.localize("View"),action:function(a){u.open({data:a.record})}},{text:app.localize("Edit"),visible:function(){return r.edit},action:function(a){d.open({id:a.record.tonToiThieu.id,isHangHoa:!0,idHangHoa:t})}},{text:app.localize("Delete"),visible:function(){return r.delete},action:function(a){e(a.record.tonToiThieu)}}]}},{targets:1,data:"dM_KhoTenKho"},{targets:2,data:"tonToiThieu.soLuongTonToiThieu"},{targets:3,data:"tonToiThieu.tonToiDa"}]});return n.find("#ShowAdvancedFiltersSpan").click(function(){n.find("#ShowAdvancedFiltersSpan").hide(),n.find("#HideAdvancedFiltersSpan").show(),n.find("#AdvacedAuditFiltersArea").slideDown()}),n.find("#HideAdvancedFiltersSpan").click(function(){n.find("#HideAdvancedFiltersSpan").hide(),n.find("#ShowAdvancedFiltersSpan").show(),n.find("#AdvacedAuditFiltersArea").slideUp()}),n.find("#CreateNewTonToiThieuButton").click(function(){d.open({isHangHoa:!0,idHangHoa:t})}),n.find("#ExportToExcelButton").click(function(){l.getTonToiThieusToExcel({filter:n.find("#TonToiThieusTableFilter").val(),minSoLuongTonToiThieuFilter:n.find("#MinSoLuongTonToiThieuFilterId").val(),maxSoLuongTonToiThieuFilter:n.find("#MaxSoLuongTonToiThieuFilterId").val(),minTonToiDaFilter:n.find("#MinTonToiDaFilterId").val(),maxTonToiDaFilter:n.find("#MaxTonToiDaFilterId").val(),dM_HangHoaTenHangHoaFilter:n.find("#DM_HangHoaTenHangHoaFilterId").val(),dM_KhoTenKhoFilter:n.find("#DM_KhoTenKhoFilterId").val()}).done(function(a){app.downloadTempFile(a)})}),abp.event.on("app.createOrEditTonToiThieuModalSaved",function(){i()}),n.find("#GetTonToiThieusButton").click(function(a){a.preventDefault(),i()}),$(document).keypress(function(a){13===a.which&&i()}),!0},WarehouseControler=function(a){function i(){h.ajax.reload()}function e(a){abp.message.confirm("",function(e){e&&l.delete({id:a.id}).done(function(){i(!0),abp.notify.success(app.localize("SuccessfullyDeleted"))})})}var n=a.getModal().find("#DM_HangHoaWarehouseTab"),t=a.getModal().find("[name=id]").val(),o=$("#ViTriHangTrongKhosTable"),l=abp.services.app.viTriHangTrongKhos,r={create:abp.auth.hasPermission("Pages.ViTriHangTrongKhos.Create"),edit:abp.auth.hasPermission("Pages.ViTriHangTrongKhos.Edit"),delete:abp.auth.hasPermission("Pages.ViTriHangTrongKhos.Delete")},d=new app.ModalManager({viewUrl:abp.appPath+"crm/ViTriHangTrongKhos/CreateOrEditModal",scriptUrl:abp.appPath+"view-resources/Areas/crm/Views/ViTriHangTrongKhos/_CreateOrEditModal.js",modalClass:"CreateOrEditViTriHangTrongKhoModal"}),u=new app.ModalManager({viewUrl:abp.appPath+"crm/ViTriHangTrongKhos/ViewviTriHangTrongKhoModal",modalClass:"ViewViTriHangTrongKhoModal"}),h=o.DataTable({paging:!0,serverSide:!0,processing:!0,listAction:{ajaxFunction:l.getAll,inputFilter:function(){return{filter:n.find("#ViTriHangTrongKhosTableFilter").val(),dM_HangHoaId:t,iD_MaVachFilter:n.find("#ID_MaVachFilterId").val(),viTriFilter:n.find("#ViTriFilterId").val(),dM_KhoTenKhoFilter:n.find("#DM_KhoTenKhoFilterId").val(),dM_HangHoaTenHangHoaFilter:n.find("#DM_HangHoaTenHangHoaFilterId").val()}}},columnDefs:[{width:120,targets:0,data:null,orderable:!1,autoWidth:!1,defaultContent:"",rowAction:{cssClass:"btn btn-brand dropdown-toggle",text:'<i class="fa fa-cog"></i> '+app.localize("Actions")+' <span class="caret"></span>',items:[{text:app.localize("View"),action:function(a){u.open({data:a.record})}},{text:app.localize("Edit"),visible:function(){return r.edit},action:function(a){d.open({id:a.record.viTriHangTrongKho.id,isHangHoa:!0,idHangHoa:t})}},{text:app.localize("Delete"),visible:function(){return r.delete},action:function(a){e(a.record.viTriHangTrongKho)}}]}},{targets:1,data:"dM_KhoTenKho"},{targets:2,data:"viTriHangTrongKho.viTri"}]});return n.find("#ShowAdvancedFiltersSpan").click(function(){n.find("#ShowAdvancedFiltersSpan").hide(),n.find("#HideAdvancedFiltersSpan").show(),n.find("#AdvacedAuditFiltersArea").slideDown()}),n.find("#HideAdvancedFiltersSpan").click(function(){n.find("#HideAdvancedFiltersSpan").hide(),n.find("#ShowAdvancedFiltersSpan").show(),n.find("#AdvacedAuditFiltersArea").slideUp()}),n.find("#CreateNewViTriHangTrongKhoButton").click(function(){d.open({isHangHoa:!0,idHangHoa:t})}),n.find("#ExportToExcelButton").click(function(){l.getViTriHangTrongKhosToExcel({filter:n.find("#ViTriHangTrongKhosTableFilter").val(),iD_MaVachFilter:n.find("#ID_MaVachFilterId").val(),viTriFilter:n.find("#ViTriFilterId").val(),dM_KhoTenKhoFilter:n.find("#DM_KhoTenKhoFilterId").val(),dM_HangHoaTenHangHoaFilter:n.find("#DM_HangHoaTenHangHoaFilterId").val()}).done(function(a){app.downloadTempFile(a)})}),abp.event.on("app.createOrEditViTriHangTrongKhoModalSaved",function(){i()}),n.find("#GetViTriHangTrongKhosButton").click(function(a){a.preventDefault(),i()}),$(document).keypress(function(a){13===a.which&&i()}),!0},DiscountControler=function(a){function i(){h.ajax.reload()}function e(a){abp.message.confirm("",function(e){e&&l.delete({id:a.id}).done(function(){i(!0),abp.notify.success(app.localize("SuccessfullyDeleted"))})})}var n=a.getModal().find("#DM_HangHoaDiscountTab"),t=a.getModal().find("[name=id]").val(),o=$("#ChietKhauMacDinh_NhanViensTable"),l=abp.services.app.chietKhauMacDinh_NhanViens,r={create:abp.auth.hasPermission("Pages.ChietKhauMacDinh_NhanViens.Create"),edit:abp.auth.hasPermission("Pages.ChietKhauMacDinh_NhanViens.Edit"),delete:abp.auth.hasPermission("Pages.ChietKhauMacDinh_NhanViens.Delete")},d=new app.ModalManager({viewUrl:abp.appPath+"crm/ChietKhauMacDinh_NhanViens/CreateOrEditModal",scriptUrl:abp.appPath+"view-resources/Areas/crm/Views/ChietKhauMacDinh_NhanViens/_CreateOrEditModal.js",modalClass:"CreateOrEditChietKhauMacDinh_NhanVienModal"}),u=new app.ModalManager({viewUrl:abp.appPath+"crm/ChietKhauMacDinh_NhanViens/ViewchietKhauMacDinh_NhanVienModal",modalClass:"ViewChietKhauMacDinh_NhanVienModal"}),h=o.DataTable({paging:!0,serverSide:!0,processing:!0,listAction:{ajaxFunction:l.getAll,inputFilter:function(){return{filter:$("#ChietKhauMacDinh_NhanViensTableFilter").val(),dM_HangHoaId:t,minChietKhauFilter:$("#MinChietKhauFilterId").val(),maxChietKhauFilter:$("#MaxChietKhauFilterId").val(),laPhanTramFilter:$("#LaPhanTramFilterId").val(),theoNhomNhanVienFilter:$("#TheoNhomNhanVienFilterId").val(),theoNhomHangHoaFilter:$("#TheoNhomHangHoaFilterId").val(),minChietKhau_YeuCauFilter:$("#MinChietKhau_YeuCauFilterId").val(),maxChietKhau_YeuCauFilter:$("#MaxChietKhau_YeuCauFilterId").val(),laPhanTram_YeuCauFilter:$("#LaPhanTram_YeuCauFilterId").val(),chietKhauTuVanFilter:$("#ChietKhauTuVanFilterId").val(),dM_HangHoaTenHangHoaFilter:$("#DM_HangHoaTenHangHoaFilterId").val(),userNameFilter:$("#UserNameFilterId").val(),dM_DonViTenDonViFilter:$("#DM_DonViTenDonViFilterId").val(),dM_NhomHangHoaTenNhomFilter:$("#DM_NhomHangHoaTenNhomFilterId").val()}}},columnDefs:[{width:120,targets:0,data:null,orderable:!1,autoWidth:!1,defaultContent:"",rowAction:{cssClass:"btn btn-brand dropdown-toggle",text:'<i class="fa fa-cog"></i> '+app.localize("Actions")+' <span class="caret"></span>',items:[{text:app.localize("View"),action:function(a){u.open({data:a.record})}},{text:app.localize("Edit"),visible:function(){return r.edit},action:function(a){d.open({id:a.record.chietKhauMacDinh_NhanVien.id,isHangHoa:!0,idHangHoa:t})}},{text:app.localize("Delete"),visible:function(){return r.delete},action:function(a){e(a.record.chietKhauMacDinh_NhanVien)}}]}},{targets:1,data:"chietKhauMacDinh_NhanVien.chietKhau"},{targets:2,data:"chietKhauMacDinh_NhanVien.laPhanTram",render:function(a){return a?'<i class="la la-check-square m--font-success" title="True"></i>':'<i class="la la-times-circle" title="False"></i>'}},{targets:3,data:"userName"},{targets:4,data:"dM_DonViTenDonVi"}]});return n.find("#ShowAdvancedFiltersSpan").click(function(){n.find("#ShowAdvancedFiltersSpan").hide(),n.find("#HideAdvancedFiltersSpan").show(),n.find("#AdvacedAuditFiltersArea").slideDown()}),n.find("#HideAdvancedFiltersSpan").click(function(){n.find("#HideAdvancedFiltersSpan").hide(),n.find("#ShowAdvancedFiltersSpan").show(),n.find("#AdvacedAuditFiltersArea").slideUp()}),n.find("#CreateNewChietKhauMacDinh_NhanVienButton").click(function(){d.open({isHangHoa:!0,idHangHoa:t})}),n.find("#ExportToExcelButton").click(function(){l.getChietKhauMacDinh_NhanViensToExcel({filter:$("#ChietKhauMacDinh_NhanViensTableFilter").val(),minChietKhauFilter:$("#MinChietKhauFilterId").val(),maxChietKhauFilter:$("#MaxChietKhauFilterId").val(),laPhanTramFilter:$("#LaPhanTramFilterId").val(),theoNhomNhanVienFilter:$("#TheoNhomNhanVienFilterId").val(),theoNhomHangHoaFilter:$("#TheoNhomHangHoaFilterId").val(),minChietKhau_YeuCauFilter:$("#MinChietKhau_YeuCauFilterId").val(),maxChietKhau_YeuCauFilter:$("#MaxChietKhau_YeuCauFilterId").val(),laPhanTram_YeuCauFilter:$("#LaPhanTram_YeuCauFilterId").val(),chietKhauTuVanFilter:$("#ChietKhauTuVanFilterId").val(),dM_HangHoaTenHangHoaFilter:$("#DM_HangHoaTenHangHoaFilterId").val(),userNameFilter:$("#UserNameFilterId").val(),dM_DonViTenDonViFilter:$("#DM_DonViTenDonViFilterId").val(),dM_NhomHangHoaTenNhomFilter:$("#DM_NhomHangHoaTenNhomFilterId").val()}).done(function(a){app.downloadTempFile(a)})}),abp.event.on("app.createOrEditChietKhauMacDinh_NhanVienModalSaved",function(){i()}),n.find("#GetChietKhauMacDinh_NhanViensButton").click(function(a){a.preventDefault(),i()}),$(document).keypress(function(a){13===a.which&&i()}),!0};!function(a){app.modals.ChangeHangHoaImageModal=function(){var i,e=null,n=null,t=function(a){var i=new Date;return a.length>0?abp.appPath+"crm/DM_HangHoas/GetHangHoaImageByHangHoaId?hangHoaId="+a+"&v="+i.getTime():abp.appPath+"Common/Images/default-profile-picture.png"},o=abp.services.app.dM_HangHoas;this.init=function(t){i=t,a("#ChangeHangHoaImageModalForm input[name=HangHoaImage]").change(function(){a("#ChangeHangHoaImageModalForm").submit()}),a("#ChangeHangHoaImageModalForm").ajaxForm({beforeSubmit:function(i,e,n){var t=a("#ChangeHangHoaImageModalForm input[name=HangHoaImage]").get()[0].files;if(!t.length)return!1;var o=t[0],l="|"+o.type.slice(o.type.lastIndexOf("/")+1)+"|";return-1==="|jpg|jpeg|png|gif|".indexOf(l)?(abp.message.warn(app.localize("HangHoaImage_Warn_FileType")),!1):!(o.size>5242880)||(abp.message.warn(app.localize("HangHoaImage_Warn_SizeLimit",app.maxProfilPictureBytesUserFriendlyValue)),!1)},success:function(i){if(i.success){var t=a("#HangHoaImageResize"),o=abp.appPath+"Temp/Downloads/"+i.result.fileName+"?v="+(new Date).valueOf();n=i.result.fileName,e&&e.destroy(),t.show(),t.attr("src",o),t.attr("originalWidth",i.result.width),t.attr("originalHeight",i.result.height),t.Jcrop({setSelect:[0,0,100,100],aspectRatio:1,boxWidth:400,boxHeight:400},function(){e=this})}else abp.message.error(i.error.message)}}),a("#HangHoaImageResize").hide()},this.save=function(){if(n){var l={};e&&(l=e.getSelection());var r=e.getContainerSize()[0],d=e.getContainerSize()[1],u=r,h=d;a("#HangHoaImageResize")&&(u=parseInt(a("#HangHoaImageResize").attr("originalWidth")),h=parseInt(a("#HangHoaImageResize").attr("originalHeight")));var c=u/r,s=h/d;o.updateHangHoaImage({dM_HangHoaId:a("#ChangeHangHoaImageModalForm input[name=dM_HangHoaId]").val(),fileName:n,x:parseInt(l.x*c),y:parseInt(l.y*s),width:parseInt(l.w*c),height:parseInt(l.h*s)}).done(function(){e.destroy(),e=null,a(".hanghoa-image").attr("src",t(a("#ChangeHangHoaImageModalForm input[name=dM_HangHoaId]").val())),i.close()})}}}}(jQuery),function(a){app.modals.CreateOrEditDM_HangHoaModal=function(){var i,e=abp.services.app.dM_HangHoas,n=null,t=null,o=null,l=null,r=null,d=null,u=new app.ModalManager({viewUrl:abp.appPath+"crm/DM_HangHoas/DM_NhomHangHoaLookupTableModal",scriptUrl:abp.appPath+"view-resources/Areas/crm/Views/DM_HangHoas/_DM_NhomHangHoaLookupTableModal.js",modalClass:"DM_NhomHangHoaLookupTableModal"}),h=new app.ModalManager({viewUrl:abp.appPath+"crm/DM_HangHoas/DM_QuocGiaLookupTableModal",scriptUrl:abp.appPath+"view-resources/Areas/crm/Views/DM_HangHoas/_DM_QuocGiaLookupTableModal.js",modalClass:"DM_QuocGiaLookupTableModal"}),c=new app.ModalManager({viewUrl:abp.appPath+"crm/DM_HangHoas/DM_DoiTuongLookupTableModal",scriptUrl:abp.appPath+"view-resources/Areas/crm/Views/DM_HangHoas/_DM_DoiTuongLookupTableModal.js",modalClass:"DM_DoiTuongLookupTableModal"}),s=new app.ModalManager({viewUrl:abp.appPath+"crm/DM_HangHoas/DM_ThueSuatLookupTableModal",scriptUrl:abp.appPath+"view-resources/Areas/crm/Views/DM_HangHoas/_DM_ThueSuatLookupTableModal.js",modalClass:"DM_ThueSuatLookupTableModal"}),T=new app.ModalManager({viewUrl:abp.appPath+"crm/DM_HangHoas/DM_DonViTinhLookupTableModal",scriptUrl:abp.appPath+"view-resources/Areas/crm/Views/DM_HangHoas/_DM_DonViTinhLookupTableModal.js",modalClass:"DM_DonViTinhLookupTableModal"}),p=new app.ModalManager({viewUrl:abp.appPath+"crm/DM_HangHoas/DM_NhomKhachHangLookupTableModal",scriptUrl:abp.appPath+"view-resources/Areas/crm/Views/DM_HangHoas/_DM_NhomKhachHangLookupTableModal.js",modalClass:"DM_NhomKhachHangLookupTableModal"}),g=new app.ModalManager({viewUrl:abp.appPath+"crm/DM_HangHoas/ChangeImageModal",scriptUrl:abp.appPath+"view-resources/Areas/crm/Views/DM_HangHoas/_ChangeImageModal.js",modalClass:"ChangeHangHoaImageModal"});this.init=function(e){var o=(i=e).getModal();o.find(".numeric").number(!0,0),o.find(".select2").select2({placeholder:"Select an option",width:"100%"}),o.find(".date-picker").datetimepicker({locale:abp.localization.currentLanguage.name,format:"L"});i.getModal().find("[name=id]");o.find(".date-picker").each(function(){"01/01/0001"==a(this).val()&&a(this).data("DateTimePicker").date(new Date)}),n=i.getModal().find("form[name=DM_HangHoaCommonInforForm]"),t=i.getModal().find("form[name=DM_HangHoaDetailsForm]"),n.validate(),t.validate(),o.find(".antikeydown").keydown(function(a){13===a.which&&a.stopPropagation()})},a("#OpenDM_NhomHangHoaLookupTableButton").click(function(){var a=n.serializeFormToObject();u.open({id:a.dM_NhomHangHoaId,displayName:a.dM_NhomHangHoaTenNhom},function(a){n.find("input[name=dM_NhomHangHoaTenNhom]").val(a.displayName),n.find("input[name=dM_NhomHangHoaId]").val(a.id)})}),a("#ClearDM_NhomHangHoaTenNhomButton").click(function(){n.find("input[name=dM_NhomHangHoaTenNhom]").val(""),n.find("input[name=dM_NhomHangHoaId]").val("")}),a("#OpenDM_QuocGiaLookupTableButton").click(function(){var a=n.serializeFormToObject();h.open({id:a.dM_QuocGiaId,displayName:a.dM_QuocGiaTenNuoc},function(a){n.find("input[name=dM_QuocGiaTenNuoc]").val(a.displayName),n.find("input[name=dM_QuocGiaId]").val(a.id)})}),a("#ClearDM_QuocGiaTenNuocButton").click(function(){n.find("input[name=dM_QuocGiaTenNuoc]").val(""),n.find("input[name=dM_QuocGiaId]").val("")}),a("#OpenDM_DoiTuongLookupTableButton").click(function(){var a=n.serializeFormToObject();c.open({id:a.dM_DoiTuongId,displayName:a.dM_DoiTuongTenDoiTuong},function(a){n.find("input[name=dM_DoiTuongTenDoiTuong]").val(a.displayName),n.find("input[name=dM_DoiTuongId]").val(a.id)})}),a("#ClearDM_DoiTuongTenDoiTuongButton").click(function(){n.find("input[name=dM_DoiTuongTenDoiTuong]").val(""),n.find("input[name=dM_DoiTuongId]").val("")}),a("#OpenDM_ThueSuatLookupTableButton").click(function(){var a=n.serializeFormToObject();s.open({id:a.dM_ThueSuatId,displayName:a.dM_ThueSuatThueSuat},function(a){n.find("input[name=dM_ThueSuatThueSuat]").val(a.displayName),n.find("input[name=dM_ThueSuatId]").val(a.id)})}),a("#ClearDM_ThueSuatThueSuatButton").click(function(){n.find("input[name=dM_ThueSuatThueSuat]").val(""),n.find("input[name=dM_ThueSuatId]").val("")}),a("#OpenDM_DonViTinhLookupTableButton").click(function(){var a=n.serializeFormToObject();T.open({id:a.dM_DonViTinhId,displayName:a.dM_DonViTinhTenDonViTinh},function(a){n.find("input[name=dM_DonViTinhTenDonViTinh]").val(a.displayName),n.find("input[name=dM_DonViTinhId]").val(a.id)})}),a("#ClearDM_DonViTinhTenDonViTinhButton").click(function(){n.find("input[name=dM_DonViTinhTenDonViTinh]").val(""),n.find("input[name=dM_DonViTinhId]").val("")}),a("#OpenDM_DonViTinhQuyCachLookupTableButton").click(function(){var a=n.serializeFormToObject();T.open({id:a.iD_DVTQuyCach,displayName:a.dM_DonViTinhQuyCachTenDonViTinh},function(a){n.find("input[name=dM_DonViTinhQuyCachTenDonViTinh]").val(a.displayName),n.find("input[name=iD_DVTQuyCach]").val(a.id)})}),a("#ClearDM_DonViTinhQuyCachTenDonViTinhButton").click(function(){n.find("input[name=dM_DonViTinhQuyCachTenDonViTinh]").val(""),n.find("input[name=iD_DVTQuyCach]").val("")}),a("#OpenNhomKH1TenNhomLookupTableButton").click(function(){var a=t.serializeFormToObject();p.open({id:a.iDs_NhomKH1,displayName:a.nhomKH1TenNhom},function(a){t.find("input[name=nhomKH1TenNhom]").val(a.displayName),t.find("input[name=iDs_NhomKH1]").val(a.id)})}),a("#ClearNhomKH1TenNhomButton").click(function(){t.find("input[name=NhomKH1TenNhom]").val(""),t.find("input[name=iDs_NhomKH1]").val("")}),a("#DM_HangHoaShipmentTabLink").click(function(){o=null==o?ShipmentControler(i):o}),a("#DM_HangHoaDiscountTabLink").click(function(){l=null==l?DiscountControler(i):l}),a("#DM_HangHoaInventoryTabLink").click(function(){r=null==r?InventoryControler(i):r}),a("#DM_HangHoaWarehouseTabLink").click(function(){d=null==d?WarehouseControler(i):WarehouseControl}),a("#DM_HangHoaChangeImageButton").click(function(){var a=n.serializeFormToObject();g.open({id:a.id})}),this.save=function(){if(n.valid()&&t.valid()){var o=n.serializeFormToObject(),l=t.serializeFormToObject();l.IDs_NhomKH1=a('[name="NhomKH1IDs"]').val().join(","),l.IDs_NhomKH2=a('[name="NhomKH2IDs"]').val().join(","),l.IDs_NhomKH3=a('[name="NhomKH3IDs"]').val().join(","),i.setBusy(!0),e.createOrEdit(a.extend({},o,l)).done(function(){abp.notify.info(app.localize("SavedSuccessfully")),i.close(),abp.event.trigger("app.createOrEditDM_HangHoaModalSaved")}).always(function(){i.setBusy(!1)})}}}}(jQuery),$(function(){function a(){r.ajax.reload()}function i(i){abp.message.confirm("",function(e){e&&n.delete({id:i.id}).done(function(){a(!0),abp.notify.success(app.localize("SuccessfullyDeleted"))})})}var e=$("#DM_HangHoasTable"),n=abp.services.app.dM_HangHoas;$(".date-picker").datetimepicker({locale:abp.localization.currentLanguage.name,format:"L"});var t={create:abp.auth.hasPermission("Pages.DM_HangHoas.Create"),edit:abp.auth.hasPermission("Pages.DM_HangHoas.Edit"),delete:abp.auth.hasPermission("Pages.DM_HangHoas.Delete")},o=new app.ModalManager({viewUrl:abp.appPath+"crm/DM_HangHoas/CreateOrEditModal",scriptUrl:abp.appPath+"view-resources/Areas/crm/Views/DM_HangHoas/_CreateOrEditModal.js",modalClass:"CreateOrEditDM_HangHoaModal",save:!0,saveAndClose:!0,saveAndNew:!0,buttons:[{iconClass:"",buttonClass:"",eventClass:"",function:"",text:""},{iconClass:"",buttonClass:"",function:"",text:""}]}),l=new app.ModalManager({viewUrl:abp.appPath+"crm/DM_HangHoas/ViewdM_HangHoaModal",modalClass:"ViewDM_HangHoaModal"}),r=e.DataTable({paging:!0,serverSide:!0,processing:!0,listAction:{ajaxFunction:n.getAll,inputFilter:function(){return{filter:$("#DM_HangHoasTableFilter").val(),isHangHoa:!0,maHangHoaFilter:$("#MaHangHoaFilterId").val(),tenHangHoaFilter:$("#TenHangHoaFilterId").val(),minGiaBanLeFilter:$("#MinGiaBanLeFilterId").val(),maxGiaBanLeFilter:$("#MaxGiaBanLeFilterId").val(),minTiSuatBanLeFilter:$("#MinTiSuatBanLeFilterId").val(),maxTiSuatBanLeFilter:$("#MaxTiSuatBanLeFilterId").val(),minGiaNhapFilter:$("#MinGiaNhapFilterId").val(),maxGiaNhapFilter:$("#MaxGiaNhapFilterId").val(),maVachFilter:$("#MaVachFilterId").val(),minQuyCachFilter:$("#MinQuyCachFilterId").val(),maxQuyCachFilter:$("#MaxQuyCachFilterId").val(),iD_DVTQuyCachFilter:$("#ID_DVTQuyCachFilterId").val(),minLoaiBaoHanhFilter:$("#MinLoaiBaoHanhFilterId").val(),maxLoaiBaoHanhFilter:$("#MaxLoaiBaoHanhFilterId").val(),minThoiGianBaoHanhFilter:$("#MinThoiGianBaoHanhFilterId").val(),maxThoiGianBaoHanhFilter:$("#MaxThoiGianBaoHanhFilterId").val(),tenTGBaoHanhFilter:$("#TenTGBaoHanhFilterId").val(),minChiPhiThucHienFilter:$("#MinChiPhiThucHienFilterId").val(),maxChiPhiThucHienFilter:$("#MaxChiPhiThucHienFilterId").val(),chiPhiTinhTheoPTFilter:$("#ChiPhiTinhTheoPTFilterId").val(),tinhCPSauChietKhauFilter:$("#TinhCPSauChietKhauFilterId").val(),ghiChuFilter:$("#GhiChuFilterId").val(),minSoPhutThucHienFilter:$("#MinSoPhutThucHienFilterId").val(),maxSoPhutThucHienFilter:$("#MaxSoPhutThucHienFilterId").val(),minChietKhauMD_NVFilter:$("#MinChietKhauMD_NVFilterId").val(),maxChietKhauMD_NVFilter:$("#MaxChietKhauMD_NVFilterId").val(),chietKhauMD_NVTheoPTFilter:$("#ChietKhauMD_NVTheoPTFilterId").val(),theoDoiFilter:$("#TheoDoiFilterId").val(),tenKhacFilter:$("#TenKhacFilterId").val(),chatLieuFilter:$("#ChatLieuFilterId").val(),kichCoFilter:$("#KichCoFilterId").val(),mauSacFilter:$("#MauSacFilterId").val(),dM_NhomHangHoaTenNhomFilter:$("#DM_NhomHangHoaTenNhomFilterId").val(),dM_QuocGiaTenNuocFilter:$("#DM_QuocGiaTenNuocFilterId").val(),dM_DoiTuongTenDoiTuongFilter:$("#DM_DoiTuongTenDoiTuongFilterId").val(),dM_ThueSuatThueSuatFilter:$("#DM_ThueSuatThueSuatFilterId").val(),dM_DonViTinhTenDonViTinhFilter:$("#DM_DonViTinhTenDonViTinhFilterId").val()}}},columnDefs:[{width:120,targets:0,data:null,orderable:!1,autoWidth:!1,defaultContent:"",rowAction:{cssClass:"btn btn-brand dropdown-toggle",text:'<i class="fa fa-cog"></i> '+app.localize("Actions")+' <span class="caret"></span>',items:[{text:app.localize("View"),action:function(a){l.open({data:a.record})}},{text:app.localize("Edit"),visible:function(){return t.edit},action:function(a){o.open({id:a.record.dM_HangHoa.id})}},{text:app.localize("Delete"),visible:function(){return t.delete},action:function(a){i(a.record.dM_HangHoa)}}]}},{targets:1,data:"dM_HangHoa.maHangHoa"},{targets:2,data:"dM_HangHoa.tenHangHoa"},{targets:3,data:"dM_HangHoa.giaBanLe"},{targets:4,data:"dM_HangHoa.tiSuatBanLe"},{targets:5,data:"dM_HangHoa.giaNhap"},{targets:6,data:"dM_DonViTinhTenDonViTinh"},{targets:7,data:"dM_HangHoa.quyCach"},{targets:8,data:"dM_DonViTinhQuyCachTenDonViTinh"},{targets:9,data:"dM_HangHoa.loaiBaoHanh"},{targets:10,data:"dM_HangHoa.thoiGianBaoHanh"},{targets:11,data:"dM_HangHoa.tenTGBaoHanh"},{targets:12,data:"dM_HangHoa.chiPhiThucHien"},{targets:13,data:"dM_HangHoa.chiPhiTinhTheoPT",render:function(a){return a?'<i class="la la-check-square m--font-success" title="True"></i>':'<i class="la la-times-circle" title="False"></i>'}},{targets:14,data:"dM_HangHoa.tinhCPSauChietKhau",render:function(a){return a?'<i class="la la-check-square m--font-success" title="True"></i>':'<i class="la la-times-circle" title="False"></i>'}},{targets:15,data:"dM_HangHoa.soPhutThucHien"},{targets:16,data:"dM_HangHoa.chietKhauMD_NV"},{targets:17,data:"dM_HangHoa.chietKhauMD_NVTheoPT",render:function(a){return a?'<i class="la la-check-square m--font-success" title="True"></i>':'<i class="la la-times-circle" title="False"></i>'}},{targets:18,data:"dM_HangHoa.theoDoi",render:function(a){return a?'<i class="la la-check-square m--font-success" title="True"></i>':'<i class="la la-times-circle" title="False"></i>'}},{targets:19,data:"dM_HangHoa.tenKhac"},{targets:20,data:"dM_HangHoa.chatLieu"},{targets:21,data:"dM_HangHoa.kichCo"},{targets:22,data:"dM_HangHoa.mauSac"},{targets:23,data:"dM_NhomHangHoaTenNhom"},{targets:24,data:"dM_QuocGiaTenNuoc"},{targets:25,data:"dM_DoiTuongTenDoiTuong"},{targets:26,data:"dM_ThueSuatThueSuat"}]});$("#ShowAdvancedFiltersSpan").click(function(){$("#ShowAdvancedFiltersSpan").hide(),$("#HideAdvancedFiltersSpan").show(),$("#AdvacedAuditFiltersArea").slideDown()}),$("#HideAdvancedFiltersSpan").click(function(){$("#HideAdvancedFiltersSpan").hide(),$("#ShowAdvancedFiltersSpan").show(),$("#AdvacedAuditFiltersArea").slideUp()}),$("#CreateNewDM_HangHoaButton").click(function(){o.open()}),$("#ExportToExcelButton").click(function(){n.getDM_HangHoasToExcel({filter:$("#DM_HangHoasTableFilter").val(),anhFilter:$("#AnhFilterId").val(),maHangHoaFilter:$("#MaHangHoaFilterId").val(),tenHangHoaFilter:$("#TenHangHoaFilterId").val(),laHangHoaFilter:$("#LaHangHoaFilterId").val(),iD_PhanLoaiFilter:$("#ID_PhanLoaiFilterId").val(),minGiaBanLeFilter:$("#MinGiaBanLeFilterId").val(),maxGiaBanLeFilter:$("#MaxGiaBanLeFilterId").val(),minTiSuatBanLeFilter:$("#MinTiSuatBanLeFilterId").val(),maxTiSuatBanLeFilter:$("#MaxTiSuatBanLeFilterId").val(),minGiaNhapFilter:$("#MinGiaNhapFilterId").val(),maxGiaNhapFilter:$("#MaxGiaNhapFilterId").val(),minGiaBan1Filter:$("#MinGiaBan1FilterId").val(),maxGiaBan1Filter:$("#MaxGiaBan1FilterId").val(),minTiSuatTheoGiaBan1Filter:$("#MinTiSuatTheoGiaBan1FilterId").val(),maxTiSuatTheoGiaBan1Filter:$("#MaxTiSuatTheoGiaBan1FilterId").val(),minGiaBan2Filter:$("#MinGiaBan2FilterId").val(),maxGiaBan2Filter:$("#MaxGiaBan2FilterId").val(),minTiSuatTheoGiaBan2Filter:$("#MinTiSuatTheoGiaBan2FilterId").val(),maxTiSuatTheoGiaBan2Filter:$("#MaxTiSuatTheoGiaBan2FilterId").val(),minGiaBan3Filter:$("#MinGiaBan3FilterId").val(),maxGiaBan3Filter:$("#MaxGiaBan3FilterId").val(),minTiSuatTheoGiaBan3Filter:$("#MinTiSuatTheoGiaBan3FilterId").val(),maxTiSuatTheoGiaBan3Filter:$("#MaxTiSuatTheoGiaBan3FilterId").val(),iDs_NhomKH2Filter:$("#IDs_NhomKH2FilterId").val(),iDs_NhomKH3Filter:$("#IDs_NhomKH3FilterId").val(),maVachFilter:$("#MaVachFilterId").val(),minQuyCachFilter:$("#MinQuyCachFilterId").val(),maxQuyCachFilter:$("#MaxQuyCachFilterId").val(),iD_DVTQuyCachFilter:$("#ID_DVTQuyCachFilterId").val(),minLoaiBaoHanhFilter:$("#MinLoaiBaoHanhFilterId").val(),maxLoaiBaoHanhFilter:$("#MaxLoaiBaoHanhFilterId").val(),minThoiGianBaoHanhFilter:$("#MinThoiGianBaoHanhFilterId").val(),maxThoiGianBaoHanhFilter:$("#MaxThoiGianBaoHanhFilterId").val(),tenTGBaoHanhFilter:$("#TenTGBaoHanhFilterId").val(),minChiPhiThucHienFilter:$("#MinChiPhiThucHienFilterId").val(),maxChiPhiThucHienFilter:$("#MaxChiPhiThucHienFilterId").val(),chiPhiTinhTheoPTFilter:$("#ChiPhiTinhTheoPTFilterId").val(),tinhCPSauChietKhauFilter:$("#TinhCPSauChietKhauFilterId").val(),ghiChuFilter:$("#GhiChuFilterId").val(),minSoPhutThucHienFilter:$("#MinSoPhutThucHienFilterId").val(),maxSoPhutThucHienFilter:$("#MaxSoPhutThucHienFilterId").val(),minChietKhauMD_NVFilter:$("#MinChietKhauMD_NVFilterId").val(),maxChietKhauMD_NVFilter:$("#MaxChietKhauMD_NVFilterId").val(),chietKhauMD_NVTheoPTFilter:$("#ChietKhauMD_NVTheoPTFilterId").val(),iD_DonViTinhPhu1Filter:$("#ID_DonViTinhPhu1FilterId").val(),minTyLeChuyenDoi1Filter:$("#MinTyLeChuyenDoi1FilterId").val(),maxTyLeChuyenDoi1Filter:$("#MaxTyLeChuyenDoi1FilterId").val(),iD_DonViTinhPhu2Filter:$("#ID_DonViTinhPhu2FilterId").val(),minTyLeChuyenDoi2Filter:$("#MinTyLeChuyenDoi2FilterId").val(),maxTyLeChuyenDoi2Filter:$("#MaxTyLeChuyenDoi2FilterId").val(),iD_DonViTinhPhu3Filter:$("#ID_DonViTinhPhu3FilterId").val(),minTyLeChuyenDoi3Filter:$("#MinTyLeChuyenDoi3FilterId").val(),maxTyLeChuyenDoi3Filter:$("#MaxTyLeChuyenDoi3FilterId").val(),minTinhGiaVonFilter:$("#MinTinhGiaVonFilterId").val(),maxTinhGiaVonFilter:$("#MaxTinhGiaVonFilterId").val(),theoDoiFilter:$("#TheoDoiFilterId").val(),tenKhacFilter:$("#TenKhacFilterId").val(),chatLieuFilter:$("#ChatLieuFilterId").val(),kichCoFilter:$("#KichCoFilterId").val(),mauSacFilter:$("#MauSacFilterId").val(),minTiSuat1Filter:$("#MinTiSuat1FilterId").val(),maxTiSuat1Filter:$("#MaxTiSuat1FilterId").val(),minTiSuat2Filter:$("#MinTiSuat2FilterId").val(),maxTiSuat2Filter:$("#MaxTiSuat2FilterId").val(),minTiSuat3Filter:$("#MinTiSuat3FilterId").val(),maxTiSuat3Filter:$("#MaxTiSuat3FilterId").val(),dM_NhomHangHoaTenNhomFilter:$("#DM_NhomHangHoaTenNhomFilterId").val(),dM_QuocGiaTenNuocFilter:$("#DM_QuocGiaTenNuocFilterId").val(),dM_DoiTuongTenDoiTuongFilter:$("#DM_DoiTuongTenDoiTuongFilterId").val(),dM_ThueSuatThueSuatFilter:$("#DM_ThueSuatThueSuatFilterId").val(),dM_DonViTinhTenDonViTinhFilter:$("#DM_DonViTinhTenDonViTinhFilterId").val()}).done(function(a){app.downloadTempFile(a)})}),abp.event.on("app.createOrEditDM_HangHoaModalSaved",function(){a()}),$("#GetDM_HangHoasButton").click(function(i){i.preventDefault(),a()}),$(document).keypress(function(i){13===i.which&&a()})});